# Dockerfile.nginx

# === Stage 1: Build React ===
FROM node:18 as react-build

WORKDIR /app
COPY frontend/ ./
RUN npm install
RUN npm run build


# === Stage 2: Setup Nginx ===
FROM nginx:alpine

# Copy custom nginx config
COPY nginx/default.conf /etc/nginx/conf.d/default.conf

# Copy React build output to Nginx's static folder
COPY --from=react-build /app/build /usr/share/nginx/html

# Nginx runs on port 80 by default
EXPOSE 80
